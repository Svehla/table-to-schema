"use strict";function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},twoDimToOneDim=function(b,c){return b.map(function(a,b){return a[c]})},distincItems=function(b){return b.filter(function(a,b,c){return c.indexOf(a)===b})},filterHistoryData=function(b,c,d){return c.filter(function(a){return b===a[d]})},getFullObjectFromDataAndKeys=function(b,c){var d={},e=function(b,d){return b[d]=c[d],b};return b.reduce(e,d)},validateTabToJsInputs=function(b,c){return"undefined"==typeof b||"undefined"==typeof c||null===b||null===c||0===b.length||0===c.length?(console.log("Error: U must define both parameters!"),!1):"undefined"!=typeof b[0].distinctKey&&""!==b[0].distinctKey&&null!==b[0].distinctKey||(console.log("Error: U must correct define distinctKey!"),!1)},formatTabToJs=function a(b,c){if(!validateTabToJsInputs(b,c))return null;var d={distinctKey:b[0].distinctKey.trim(),childrenName:b[0].childrenName?b[0].childrenName:"__childrens",keys:b[0].keys?b[0].keys:[]},e=distincItems(twoDimToOneDim(c,d.distinctKey)),f=b.slice(1,b.length);return e.map(function(b){var e=filterHistoryData(b,c,d.distinctKey),g=getFullObjectFromDataAndKeys(d.keys,e[0]);return 0===f.length?_extends({},g):_extends({},g,_defineProperty({},d.childrenName,a(f,e)))})};exports.tableToSchema=formatTabToJs;
